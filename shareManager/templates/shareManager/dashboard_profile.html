{% extends 'dashboard_base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load user_template_tags %}


{% block page_title %}
    {% if title %}
        {{ title }}
    {% else %}
        Profile@{{ user.username }}
    {% endif %}
{% endblock %}

{% block body %}
    <div class="container-fluid">
        {#        <h3 class="text-dark mb-4">Profile</h3>#}
        <div class="row mb-3">
            <div class="col-lg-4">
                <div class="card mb-3">
                    <div class="card-body text-center shadow"><img class="rounded-circle mb-3 mt-4"
                                                                   src="{% static 'images/base/dogs/image2.jpeg' %}"
                                                                   width="160"
                                                                   height="160" alt="User Profile">
                        <div class="mb-3">
                            <button class="btn btn-primary btn-sm" type="button">Change Photo</button>
                        </div>
                    </div>
                </div>
                <div class="card shadow mb-4">
                    <div class="card-header py-3">
                        <h6 class="text-primary font-weight-bold m-0">Projects</h6>
                    </div>
                    <div class="card-body">
                        <h4 class="small font-weight-bold">Server migration<span class="float-right">20%</span></h4>
                        <div class="progress progress-sm mb-3">
                            <div class="progress-bar bg-danger" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"
                                 style="width: 20%;"><span class="sr-only">20%</span></div>
                        </div>
                        <h4 class="small font-weight-bold">Sales tracking<span class="float-right">40%</span></h4>
                        <div class="progress progress-sm mb-3">
                            <div class="progress-bar bg-warning" aria-valuenow="40" aria-valuemin="0"
                                 aria-valuemax="100" style="width: 40%;"><span class="sr-only">40%</span></div>
                        </div>
                        <h4 class="small font-weight-bold">Customer Database<span class="float-right">60%</span></h4>
                        <div class="progress progress-sm mb-3">
                            <div class="progress-bar bg-primary" aria-valuenow="60" aria-valuemin="0"
                                 aria-valuemax="100" style="width: 60%;"><span class="sr-only">60%</span></div>
                        </div>
                        <h4 class="small font-weight-bold">Payout Details<span class="float-right">80%</span></h4>
                        <div class="progress progress-sm mb-3">
                            <div class="progress-bar bg-info" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"
                                 style="width: 80%;"><span class="sr-only">80%</span></div>
                        </div>
                        <h4 class="small font-weight-bold">Account setup<span class="float-right">Complete!</span></h4>
                        <div class="progress progress-sm mb-3">
                            <div class="progress-bar bg-success" aria-valuenow="100" aria-valuemin="0"
                                 aria-valuemax="100" style="width: 100%;"><span class="sr-only">100%</span></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8">
                <div class="row mb-3 d-none">
                    <div class="col">
                        <div class="card text-white bg-primary shadow">
                            <div class="card-body">
                                <div class="row mb-2">
                                    <div class="col">
                                        <p class="m-0">Peformance</p>
                                        <p class="m-0"><strong>65.2%</strong></p>
                                    </div>
                                    <div class="col-auto"><i class="fas fa-rocket fa-2x"></i></div>
                                </div>
                                <p class="text-white-50 small m-0"><i class="fas fa-arrow-up"></i>&nbsp;5% since last
                                    month</p>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card text-white bg-success shadow">
                            <div class="card-body">
                                <div class="row mb-2">
                                    <div class="col">
                                        <p class="m-0">Peformance</p>
                                        <p class="m-0"><strong>65.2%</strong></p>
                                    </div>
                                    <div class="col-auto"><i class="fas fa-rocket fa-2x"></i></div>
                                </div>
                                <p class="text-white-50 small m-0"><i class="fas fa-arrow-up"></i>&nbsp;5% since last
                                    month</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="card shadow mb-3">
                            <div class="card-header py-3">
                                <p class="text-primary m-0 font-weight-bold">User Settings
                                    {#                                TODO: include all these in one and make it efficient ! #}
                                    {% if user.userprofile.can_update_profile %}
                                        <span class="small text-danger">
                                        &nbsp;&nbsp;&nbsp;you can edit this only once !
                                        </span>
                                    {% endif %}
                                </p>
                            </div>
                            <div class="card-body">
                                <form disabled action="{% url 'users:user_profile_update' %}" method="POST"
                                      enctype="multipart/form-data">
                                    <fieldset {% if not user.userprofile.can_update_profile %}disabled{% endif %}>
                                        {% csrf_token %}
                                        <div class="form-row">
                                            <div class="col">

                                                {{ user_update_form.first_name|as_crispy_field }}

                                            </div>
                                            <div class="col">
                                                {{ user_update_form.last_name|as_crispy_field }}

                                            </div>
                                        </div>

                                        <div class="form-row">
                                            <div class="col">
                                                {{ user_update_form.username|as_crispy_field }}

                                            </div>
                                            <div class="col">
                                                {{ user_profile_update_form.user_date_of_birth|as_crispy_field }}

                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="col">
                                                {{ user_profile_update_form.user_identification_card_picture_front|as_crispy_field }}
                                            </div>
                                            <div class="col">
                                                {{ user_profile_update_form.user_identification_card_picture_back|as_crispy_field }}

                                            </div>
                                            <div class="col">
                                                {{ user_profile_update_form.user_identification_card_number|as_crispy_field }}

                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <button class="btn btn-primary btn-sm" type="submit">Save Settings</button>
                                        </div>
                                    </fieldset>
                                </form>
                            </div>
                        </div>
                        <div class="card shadow">
                            <div class="card-header py-3">
                                <p class="text-primary m-0 font-weight-bold">Contact Settings</p>
                            </div>
                            <div class="card-body">
                                <form>
                                    <div class="form-group"><label for="address"><strong>Address</strong></label><input
                                            class="form-control" type="text" placeholder="Sunset Blvd, 38"
                                            name="address"></div>
                                    <div class="form-row">
                                        <div class="col">
                                            <div class="form-group"><label
                                                    for="city"><strong>City</strong></label><input class="form-control"
                                                                                                   type="text"
                                                                                                   placeholder="Los Angeles"
                                                                                                   name="city"></div>
                                        </div>
                                        <div class="col">
                                            <div class="form-group"><label
                                                    for="country"><strong>Country</strong></label><input
                                                    class="form-control" type="text" placeholder="USA" name="country">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <button class="btn btn-primary btn-sm" type="submit">Save&nbsp;Settings</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
